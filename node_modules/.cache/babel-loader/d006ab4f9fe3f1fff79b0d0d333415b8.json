{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{notification}from'../../redux/actions';import{useAPI}from'../../hooks/api.hook';var UniversalForm=function UniversalForm(){var dispatch=useDispatch();var _useAPI=useAPI(),request=_useAPI.request;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setValid=_useState2[1];var _useState3=useState({title:'',content:'',organisation:'',address:'',email:'',phone:'',site:'',tags:''}),_useState4=_slicedToArray(_useState3,2),formValues=_useState4[0],setFormValues=_useState4[1];var validation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(event.target.checkValidity()===false)){_context.next=5;break;}event.stopPropagation();_context.next=10;break;case 5:dispatch(notification({isShow:true}));_context.next=8;return request('/api/posts/create','POST',JSON.stringify(formValues));case 8:response=_context.sent;dispatch(notification({title:response.type===\"success\"?'Уведомление':'Ошибка',content:response.message}));case 10:setValid(true);case 11:case\"end\":return _context.stop();}}},_callee);}));return function validation(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(event){setFormValues(function(formValues){return _objectSpread(_objectSpread({},formValues),{},_defineProperty({},event.target.name,event.target.value));});};return/*#__PURE__*/React.createElement(\"div\",{className:\"card h-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0436\\u0430\\u043B\\u043E\\u0431\\u0443 \\u0438\\u043B\\u0438 \\u043E\\u0442\\u0437\\u044B\\u0432\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{className:\"needs-validation \".concat(isValid?\"was-validated\":\"\"),noValidate:true,onSubmit:validation},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"title\"},\"\\u0422\\u0435\\u043C\\u0430\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"title\",name:\"title\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"content\"},\"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430, \\u043E\\u0442\\u0437\\u044B\\u0432\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",className:\"form-control\",id:\"content\",name:\"content\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"organisation\"},\"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"organisation\",name:\"organisation\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"address\"},\"\\u0410\\u0434\\u0440\\u0435\\u0441\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"address\",name:\"address\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"E-mail\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"email\",name:\"email\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 e-mail\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"phone\"},\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"phone\",name:\"phone\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"site\"},\"\\u0421\\u0430\\u0439\\u0442\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"site\",name:\"site\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"Please provide a valid city.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"tags\"},\"\\u0422\\u0435\\u0433\\u0438\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"tags\",name:\"tags\",required:true,onChange:handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u0441\\u043B\\u043E\\u0432\\u0430, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\\u043C \\u0431\\u044B\\u043B\\u043E \\u043F\\u0440\\u043E\\u0449\\u0435 \\u043D\\u0430\\u0439\\u0442\\u0438 \\u0432\\u0430\\u0448 \\u043F\\u043E\\u0441\\u0442\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"category\"},\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"select\",{className:\"custom-select\",id:\"category\",name:\"category\",required:true,onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{selected:true,disabled:true,value:\"\"},\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C...\"),/*#__PURE__*/React.createElement(\"option\",null,\"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430\"),/*#__PURE__*/React.createElement(\"option\",null,\"\\u041E\\u0442\\u0437\\u044B\\u0432\")),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-check\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",value:\"\",id:\"invalidCheck\",required:true}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"invalidCheck\"},\"\\u042F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \",/*#__PURE__*/React.createElement(\"a\",{href:\"/rules\"},\"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u0441\\u0430\\u0439\\u0442\\u0430\")),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"\\u0412\\u044B \\u0434\\u043E\\u043B\\u0436\\u043D\\u044B \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0442\\u044C\\u0441\\u044F \\u0441 \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F\\u043C\\u0438, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0440\\u043C\\u0443\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary mt-2\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"))));};export default UniversalForm;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Рабочий стол/learning/vseotzivu/frontend/src/components/Forms/UniversalForm.jsx"],"names":["React","useState","useDispatch","notification","useAPI","UniversalForm","dispatch","request","isValid","setValid","title","content","organisation","address","email","phone","site","tags","formValues","setFormValues","validation","event","preventDefault","target","checkValidity","stopPropagation","isShow","JSON","stringify","response","type","message","handleChange","name","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { notification } from '../../redux/actions';\r\nimport { useAPI } from '../../hooks/api.hook';\r\n\r\nconst UniversalForm = () => {\r\n    const dispatch = useDispatch();\r\n    const { request } = useAPI();\r\n    const [isValid,setValid] = useState(false);\r\n    const [formValues, setFormValues] = useState({\r\n        title: '',\r\n        content: '',\r\n        organisation: '',\r\n        address: '',\r\n        email: '',\r\n        phone: '',\r\n        site: '',\r\n        tags: '',\r\n    });\r\n\r\n    const validation = async (event) =>{\r\n        event.preventDefault();\r\n        if (event.target.checkValidity() === false) event.stopPropagation();\r\n        else{\r\n            dispatch(notification({isShow: true}));\r\n            const response = await request('/api/posts/create', 'POST', JSON.stringify(formValues));\r\n            dispatch(notification({\r\n                title: response.type === \"success\" ? 'Уведомление' : 'Ошибка',\r\n                content: response.message\r\n            }));\r\n        }\r\n        setValid(true);\r\n    }\r\n    const handleChange = event => {\r\n        setFormValues(formValues => ({\r\n            ...formValues,\r\n            [event.target.name]: event.target.value\r\n        })); \r\n    }\r\n\r\n    return(\r\n        <div className=\"card h-100\">\r\n            <div className=\"card-header\">\r\n                <h2>Добавить жалобу или отзыв</h2>\r\n            </div>\r\n            <div className=\"card-body\">\r\n                <form className={`needs-validation ${isValid ? \"was-validated\" : \"\"}`} noValidate onSubmit={validation}>\r\n                <div className=\"form-row mb-3\">\r\n                    <div className=\"col\">\r\n                        <label htmlFor=\"title\">Тема</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"title\" name=\"title\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Это обязательное поле\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-row mb-3\">\r\n                    <div className=\"col\">\r\n                        <label htmlFor=\"content\">Жалоба, отзыв</label>\r\n                        <textarea type=\"text\" className=\"form-control\" id=\"content\" name=\"content\" required onChange={handleChange}></textarea>\r\n                        <div className=\"invalid-feedback\">\r\n                            Это обязательное поле\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-row mb-3\">\r\n                    <div className=\"col-md-6\">\r\n                        <label htmlFor=\"organisation\">Организация</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"organisation\" name=\"organisation\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Это обязательное поле\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <label htmlFor=\"address\">Адрес</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"address\" name=\"address\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Это обязательное поле\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                    <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"email\">E-mail</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"email\" name=\"email\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Некорректный e-mail\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"phone\">Телефон</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"phone\" name=\"phone\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Обязательное поле\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                    <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"site\">Сайт</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"site\" name=\"site\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Please provide a valid city.\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-3 mb-3\">\r\n                        <label htmlFor=\"tags\">Теги</label>\r\n                        <input type=\"text\" className=\"form-control\" id=\"tags\" name=\"tags\" required onChange={handleChange}/>\r\n                        <div className=\"invalid-feedback\">\r\n                            Укажите ключевые слова, чтобы пользователям было проще найти ваш пост\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-3 mb-3\">\r\n                        <label htmlFor=\"category\">Категория</label>\r\n                        <select className=\"custom-select\" id=\"category\" name=\"category\" required onChange={handleChange}>\r\n                            <option selected disabled value=\"\">Выбрать...</option>\r\n                            <option>Жалоба</option>\r\n                            <option>Отзыв</option>\r\n                        </select>\r\n                        <div className=\"invalid-feedback\">\r\n                            Выберите категорию\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group mt-2\">\r\n                    <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"invalidCheck\" required/>\r\n                        <label className=\"form-check-label\" htmlFor=\"invalidCheck\">\r\n                            Я согласен с <a href=\"/rules\">правилами сайта</a>\r\n                        </label>\r\n                        <div className=\"invalid-feedback\">\r\n                            Вы должны согласиться с условиями, чтобы отправить форму\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-primary mt-2\">Отправить</button>\r\n            </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UniversalForm;"]},"metadata":{},"sourceType":"module"}