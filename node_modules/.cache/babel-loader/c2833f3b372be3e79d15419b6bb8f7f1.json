{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useState,useCallback}from'react';export var useAPI=function useAPI(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var method,body,headers,response,data,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{};setLoading(true);_context.prev=4;headers['Content-Type']='application/json';_context.next=8;return fetch(url,{method:method,body:body,headers:headers});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;setLoading(false);return _context.abrupt(\"return\",data);case 16:_context.prev=16;_context.t0=_context[\"catch\"](4);setLoading(false);setError(_context.t0.message);case 20:case\"end\":return _context.stop();}}},_callee,null,[[4,16]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);return{loading:loading,error:error,request:request};};","map":{"version":3,"sources":["C:/Users/User/OneDrive/Рабочий стол/learning/vseotzivu/frontend/src/hooks/api.hook.js"],"names":["useState","useCallback","useAPI","loading","setLoading","error","setError","request","url","method","body","headers","fetch","response","json","data","message"],"mappings":"wuBAAA,OAAQA,QAAR,CAAkBC,WAAlB,KAAoC,OAApC,CAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACMF,QAAQ,CAAC,KAAD,CADd,wCACjBG,OADiB,eACRC,UADQ,8BAEEJ,QAAQ,CAAC,IAAD,CAFV,yCAEjBK,KAFiB,eAEVC,QAFU,eAIxB,GAAMC,CAAAA,OAAO,CAAGN,WAAW,0FAAC,iBAAQO,GAAR,wKAAaC,MAAb,+CAAsB,KAAtB,CAA6BC,IAA7B,+CAAoC,IAApC,CAA0CC,OAA1C,+CAAoD,EAApD,CACxBP,UAAU,CAAC,IAAD,CAAV,CADwB,gBAGpBO,OAAO,CAAC,cAAD,CAAP,CAA0B,kBAA1B,CAHoB,sBAIGC,CAAAA,KAAK,CAACJ,GAAD,CAAM,CAC9BC,MAAM,CAANA,MAD8B,CAE9BC,IAAI,CAAJA,IAF8B,CAG9BC,OAAO,CAAPA,OAH8B,CAAN,CAJR,QAIdE,QAJc,sCASDA,CAAAA,QAAQ,CAACC,IAAT,EATC,SASdC,IATc,eAUpBX,UAAU,CAAC,KAAD,CAAV,CAVoB,gCAWbW,IAXa,4DAapBX,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,YAAEU,OAAH,CAAR,CAdoB,qEAAD,+DAgBxB,EAhBwB,CAA3B,CAiBA,MAAO,CAAEb,OAAO,CAAPA,OAAF,CAAWE,KAAK,CAALA,KAAX,CAAkBE,OAAO,CAAPA,OAAlB,CAAP,CACH,CAtBM","sourcesContent":["import {useState, useCallback} from 'react';\r\n\r\nexport const useAPI = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const request = useCallback(async ( url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true);\r\n        try{\r\n            headers['Content-Type'] = 'application/json';\r\n            const response = await fetch(url, {\r\n                method,\r\n                body,\r\n                headers\r\n            });\r\n            const data = await response.json();\r\n            setLoading(false);\r\n            return data;\r\n        } catch(e){\r\n            setLoading(false);\r\n            setError(e.message);\r\n        }\r\n    }, []);\r\n    return { loading, error, request };\r\n}"]},"metadata":{},"sourceType":"module"}