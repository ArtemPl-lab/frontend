{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\learning\\\\vseotzivu\\\\frontend\\\\src\\\\components\\\\Forms\\\\UniversalForm.jsx\";\nimport React, { useState } from 'react';\nimport { useAPI } from '../../hooks/api.hook';\nimport Modal from '../Modal/Modal';\nimport Spinner from '../Spinners/Spinner';\n\nconst UniversalForm = props => {\n  const [isValid, setValid] = useState(false);\n  const [modal, setModal] = useState(false);\n  const [modalInfo, setModalInfo] = useState({\n    title: 'Уведомление',\n    content: /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 18\n      }\n    })\n  });\n  const {\n    loading,\n    error,\n    request\n  } = useAPI();\n  const [formValues, setFormValues] = useState({\n    title: '',\n    content: '',\n    organisation: '',\n    address: '',\n    email: '',\n    phone: '',\n    site: '',\n    tags: ''\n  });\n\n  const validation = async event => {\n    const form = event.target;\n\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      event.preventDefault();\n      setModal(true);\n      setModalInfo({\n        title: 'Загрузка',\n        content: /*#__PURE__*/React.createElement(Spinner, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 26\n          }\n        })\n      });\n\n      try {\n        const response = await request('/api/posts/create', 'POST', JSON.stringify(formValues));\n\n        if (response.type === \"success\") {\n          setModalInfo({\n            title: 'Уведомление',\n            content: response.message\n          });\n        } else if (response.type === \"error\") {\n          setModalInfo({\n            title: 'Ошибка',\n            content: response.message\n          });\n        }\n      } catch (error) {\n        setModalInfo({\n          title: 'Ошибка',\n          content: error.message\n        });\n      }\n    }\n\n    setValid(true);\n  };\n\n  const handleChange = event => {\n    setFormValues(formValues => ({ ...formValues,\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    hidden: modal,\n    setHidden: setModal,\n    title: modalInfo.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, modalInfo.content), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0436\\u0430\\u043B\\u043E\\u0431\\u0443 \\u0438\\u043B\\u0438 \\u043E\\u0442\\u0437\\u044B\\u0432\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: `needs-validation ${isValid ? \"was-validated\" : \"\"}`,\n    noValidate: true,\n    onSubmit: validation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, \"\\u0422\\u0435\\u043C\\u0430\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"title\",\n    name: \"title\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, \"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, \"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430, \\u043E\\u0442\\u0437\\u044B\\u0432\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"content\",\n    name: \"content\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, \"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"organisation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, \"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"organisation\",\n    name: \"organisation\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, \"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, \"\\u0410\\u0434\\u0440\\u0435\\u0441\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"address\",\n    name: \"address\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, \"\\u042D\\u0442\\u043E \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"E-mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"email\",\n    name: \"email\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 e-mail\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"phone\",\n    name: \"phone\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"\\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"site\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, \"\\u0421\\u0430\\u0439\\u0442\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"site\",\n    name: \"site\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, \"Please provide a valid city.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"\\u0422\\u0435\\u0433\\u0438\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"tags\",\n    name: \"tags\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u0441\\u043B\\u043E\\u0432\\u0430, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\\u043C \\u0431\\u044B\\u043B\\u043E \\u043F\\u0440\\u043E\\u0449\\u0435 \\u043D\\u0430\\u0439\\u0442\\u0438 \\u0432\\u0430\\u0448 \\u043F\\u043E\\u0441\\u0442\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"custom-select\",\n    id: \"category\",\n    name: \"category\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 33\n    }\n  }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C...\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }, \"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 33\n    }\n  }, \"\\u041E\\u0442\\u0437\\u044B\\u0432\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-check-input\",\n    type: \"checkbox\",\n    value: \"\",\n    id: \"invalidCheck\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-check-label\",\n    htmlFor: \"invalidCheck\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, \"\\u042F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/rules\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 46\n    }\n  }, \"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u0441\\u0430\\u0439\\u0442\\u0430\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }\n  }, \"\\u0412\\u044B \\u0434\\u043E\\u043B\\u0436\\u043D\\u044B \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0442\\u044C\\u0441\\u044F \\u0441 \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F\\u043C\\u0438, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0440\\u043C\\u0443\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\")))));\n};\n\nexport default UniversalForm;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Рабочий стол/learning/vseotzivu/frontend/src/components/Forms/UniversalForm.jsx"],"names":["React","useState","useAPI","Modal","Spinner","UniversalForm","props","isValid","setValid","modal","setModal","modalInfo","setModalInfo","title","content","loading","error","request","formValues","setFormValues","organisation","address","email","phone","site","tags","validation","event","form","target","checkValidity","preventDefault","stopPropagation","response","JSON","stringify","type","message","handleChange","name","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useAPI } from '../../hooks/api.hook';\r\nimport Modal from '../Modal/Modal';\r\nimport Spinner from '../Spinners/Spinner';\r\n\r\nconst UniversalForm = props => {\r\n    const [isValid,setValid] = useState(false);\r\n    const [modal, setModal] = useState(false);\r\n    const [modalInfo, setModalInfo] = useState({\r\n        title: 'Уведомление',\r\n        content: <Spinner />\r\n    });\r\n    const { loading, error, request} = useAPI();\r\n    const [formValues, setFormValues] = useState({\r\n        title: '',\r\n        content: '',\r\n        organisation: '',\r\n        address: '',\r\n        email: '',\r\n        phone: '',\r\n        site: '',\r\n        tags: '',\r\n    });\r\n    const validation = async (event) =>{\r\n        const form = event.target;\r\n        if (form.checkValidity() === false) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n        else{\r\n            event.preventDefault();\r\n            setModal(true);\r\n            setModalInfo({\r\n                title: 'Загрузка',\r\n                content: <Spinner/>\r\n            });\r\n            try {\r\n                const response = await request('/api/posts/create', 'POST', JSON.stringify(formValues));\r\n                if(response.type === \"success\"){\r\n                    setModalInfo({\r\n                        title: 'Уведомление',\r\n                        content: response.message\r\n                    });\r\n                }\r\n                else if(response.type === \"error\"){\r\n                    setModalInfo({\r\n                        title: 'Ошибка',\r\n                        content: response.message\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                setModalInfo({\r\n                    title: 'Ошибка',\r\n                    content: error.message\r\n                });\r\n            }\r\n        }\r\n        setValid(true);\r\n    }\r\n    const handleChange = event => {\r\n        setFormValues(formValues => ({\r\n            ...formValues,\r\n            [event.target.name]: event.target.value\r\n        })); \r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Modal hidden={modal} setHidden={setModal} title={modalInfo.title}> \r\n                {modalInfo.content}\r\n            </Modal>\r\n            <div className=\"card h-100\">\r\n                <div className=\"card-header\">\r\n                    <h2>Добавить жалобу или отзыв</h2>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <form className={`needs-validation ${isValid ? \"was-validated\" : \"\"}`} noValidate onSubmit={validation}>\r\n                    <div className=\"form-row mb-3\">\r\n                        <div className=\"col\">\r\n                            <label htmlFor=\"title\">Тема</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"title\" name=\"title\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Это обязательное поле\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-row mb-3\">\r\n                        <div className=\"col\">\r\n                            <label htmlFor=\"content\">Жалоба, отзыв</label>\r\n                            <textarea type=\"text\" className=\"form-control\" id=\"content\" name=\"content\" required onChange={handleChange}></textarea>\r\n                            <div className=\"invalid-feedback\">\r\n                                Это обязательное поле\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-row mb-3\">\r\n                        <div className=\"col-md-6\">\r\n                            <label htmlFor=\"organisation\">Организация</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"organisation\" name=\"organisation\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Это обязательное поле\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                            <label htmlFor=\"address\">Адрес</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"address\" name=\"address\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Это обязательное поле\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-row\">\r\n                        <div className=\"col-md-6 mb-3\">\r\n                            <label htmlFor=\"email\">E-mail</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"email\" name=\"email\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Некорректный e-mail\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-6 mb-3\">\r\n                            <label htmlFor=\"phone\">Телефон</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"phone\" name=\"phone\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Обязательное поле\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-row\">\r\n                        <div className=\"col-md-6 mb-3\">\r\n                            <label htmlFor=\"site\">Сайт</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"site\" name=\"site\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Please provide a valid city.\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                            <label htmlFor=\"tags\">Теги</label>\r\n                            <input type=\"text\" className=\"form-control\" id=\"tags\" name=\"tags\" required onChange={handleChange}/>\r\n                            <div className=\"invalid-feedback\">\r\n                                Укажите ключевые слова, чтобы пользователям было проще найти ваш пост\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                            <label htmlFor=\"category\">Категория</label>\r\n                            <select className=\"custom-select\" id=\"category\" name=\"category\" required onChange={handleChange}>\r\n                                <option selected disabled value=\"\">Выбрать...</option>\r\n                                <option>Жалоба</option>\r\n                                <option>Отзыв</option>\r\n                            </select>\r\n                            <div className=\"invalid-feedback\">\r\n                                Выберите категорию\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mt-2\">\r\n                        <div className=\"form-check\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"invalidCheck\" required/>\r\n                            <label className=\"form-check-label\" htmlFor=\"invalidCheck\">\r\n                                Я согласен с <a href=\"/rules\">правилами сайта</a>\r\n                            </label>\r\n                            <div className=\"invalid-feedback\">\r\n                                Вы должны согласиться с условиями, чтобы отправить форму\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary mt-2\">Отправить</button>\r\n                </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nexport default UniversalForm;"]},"metadata":{},"sourceType":"module"}